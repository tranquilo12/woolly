{
  "http_connectivity": {
    "status": "success",
    "response_code": 404,
    "response_headers": {
      "date": "Sat, 12 Jul 2025 03:55:11 GMT",
      "server": "uvicorn",
      "content-length": "9",
      "content-type": "text/plain; charset=utf-8"
    },
    "response_body": "Not Found",
    "error": null
  },
  "sse_endpoint": {
    "status": "success",
    "sse_headers_sent": {
      "Accept": "text/event-stream",
      "Cache-Control": "no-cache",
      "Connection": "keep-alive"
    },
    "response_code": 307,
    "response_headers": {
      "date": "Sat, 12 Jul 2025 03:55:11 GMT",
      "server": "uvicorn",
      "content-length": "0",
      "location": "http://localhost:8009/sse/"
    },
    "sse_events": [],
    "error": null,
    "raw_response": ""
  },
  "fastmcp_client": {
    "status": "success",
    "fastmcp_available": true,
    "connection_result": "FastMCP test would go here",
    "tools_available": [],
    "error": null
  },
  "pydantic_ai_client": {
    "status": "connection_failed",
    "pydantic_ai_available": true,
    "mcp_module_available": true,
    "agent_creation": "Agent with MCP server created",
    "connection_test": "Connection failed",
    "error": null,
    "detailed_error": {
      "type": "ExceptionGroup",
      "message": "unhandled errors in a TaskGroup (1 sub-exception)",
      "is_taskgroup": true,
      "is_timeout": false
    }
  },
  "protocol_analysis": {
    "sse_compatibility": "headers_incorrect",
    "header_differences": [
      "Expected 'text/event-stream', got 'missing'"
    ],
    "response_format_differences": [],
    "recommendations": [
      "TaskGroup error suggests async context manager issues",
      "Consider using stdio transport instead of SSE",
      "MCP server needs to return proper SSE headers",
      "Server should return 'Content-Type: text/event-stream'"
    ]
  },
  "summary": {
    "test_duration": "0:00:01.516017",
    "tests_run": 5,
    "overall_status": "fastmcp_only_compatible",
    "key_findings": [
      "TaskGroup errors indicate async context manager issues"
    ],
    "recommendations": [
      "Use FastMCP client instead of Pydantic AI MCP client",
      "Consider implementing MCP server compatibility layer",
      "Switch to MCPServerStdio transport",
      "Run MCP server as subprocess instead of HTTP service"
    ],
    "next_steps": [
      "Review MCP server implementation for SSE compatibility",
      "Consider using fallback mode for production",
      "Test alternative MCP transport methods"
    ]
  }
}